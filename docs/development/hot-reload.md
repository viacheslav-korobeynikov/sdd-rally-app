# Hot Reload —Å Air

Air - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Air

### Windows
```powershell
go install github.com/cosmtrek/air@latest
```

### Linux/Mac
```bash
go install github.com/cosmtrek/air@latest
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
```bash
air -v
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å hot reload

**Windows:**
```powershell
air
```

**Linux/Mac:**
```bash
air -c .air.linux.toml
```

Air –±—É–¥–µ—Ç:
1. ‚úÖ –ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å Templ —à–∞–±–ª–æ–Ω—ã (`templ generate`)
2. ‚úÖ –°–æ–±–∏—Ä–∞—Ç—å Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`cmd/server/main.go`)
3. ‚úÖ –ó–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 3000
4. ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `.go`, `.templ`, `.html`, `.css`, `.js` —Ñ–∞–π–ª–∞—Ö
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### –ó–∞–ø—É—Å–∫ –±–µ–∑ Air (–æ–±—ã—á–Ω—ã–π —Å–ø–æ—Å–æ–±)

```bash
# –°–Ω–∞—á–∞–ª–∞ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å Templ —à–∞–±–ª–æ–Ω—ã
templ generate

# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
go run cmd/server/main.go
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```toml
[build]
  # –ö–æ–º–∞–Ω–¥–∞ —Å–±–æ—Ä–∫–∏
  cmd = "go build -o ./tmp/main.exe ./cmd/server"
  
  # –ö–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π (–∫–æ–º–ø–∏–ª—è—Ü–∏—è Templ)
  pre_cmd = ["templ generate"]
  
  # –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
  include_ext = ["go", "templ", "tpl", "tmpl", "html", "css", "js"]
  
  # –ò—Å–∫–ª—é—á–∞–µ–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä—è—Ç rebuild)
  exclude_dir = ["tmp", "vendor", "tests", "specs", "docs"]
  
  # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–±–æ—Ä–∫–∏
  stop_on_error = true
```

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è

| –¢–∏–ø —Ñ–∞–π–ª–∞ | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|-----------|------------|----------|
| Go –∫–æ–¥ | `.go` | –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ + –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ |
| Templ —à–∞–±–ª–æ–Ω—ã | `.templ` | –ö–æ–º–ø–∏–ª—è—Ü–∏—è Templ ‚Üí –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ |
| HTML —à–∞–±–ª–æ–Ω—ã | `.html`, `.tpl`, `.tmpl` | –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ + –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ |
| –°—Ç–∏–ª–∏ | `.css` | –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ + –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ |
| –°–∫—Ä–∏–ø—Ç—ã | `.js` | –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ + –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ |

### –ß—Ç–æ –ù–ï –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è

- –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (`*_test.go`)
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: `tmp/`, `vendor/`, `tests/`, `specs/`, `docs/`, `scripts/`
- –§–∞–π–ª—ã –≤ `.gitignore`

## üîß Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –°–æ–∑–¥–∞—Ç—å .env.local
.\scripts\create-env.ps1

# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
docker-compose up -d postgres

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Air
air
```

### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã (`.go`, `.templ`, `.html`, `.css`, `.js`)
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. Air –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –°–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç Templ (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å `.templ` —Ñ–∞–π–ª—ã)
   - –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–µ—Ä
4. –û–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ http://localhost:3000

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

Air –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- üü° **Yellow**: –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏
- üü¢ **Green**: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- üîµ **Cyan**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤
- üü£ **Magenta**: –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å
- üî¥ **Red**: –û—à–∏–±–∫–∏

```
building...
running...
watching .go files
watching .templ files
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ Templ —à–∞–±–ª–æ–Ω–∞

```go
// web/templates/auth/register.templ
templ RegisterPage() {
    <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>  // –ò–∑–º–µ–Ω–∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫
    // ...
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Air –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `.templ` —Ñ–∞–π–ª–µ
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç `templ generate` (–∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤ `.go` —Ñ–∞–π–ª—ã)
3. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
5. –û–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä ‚Üí –≤–∏–¥–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ Go –∫–æ–¥–∞

```go
// internal/auth/handlers/register.go
func RegisterPage(c *fiber.Ctx) error {
    log.Info().Msg("Register page accessed")  // –î–æ–±–∞–≤–∏–ª–∏ –ª–æ–≥
    return c.Render("register", fiber.Map{})
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Air –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `.go` —Ñ–∞–π–ª–µ
2. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
4. –û–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä ‚Üí –≤–∏–¥–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ CSS

```css
/* web/static/css/styles.css */
.btn-primary {
    background: blue;  /* –ò–∑–º–µ–Ω–∏–ª–∏ —Ü–≤–µ—Ç */
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Air –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `.css` —Ñ–∞–π–ª–µ
2. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (CSS –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ binary –∏–ª–∏ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
4. –û–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä (Ctrl+F5 –¥–ª—è –∂—ë—Å—Ç–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ CSS)

## üêõ Troubleshooting

### Air –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `air: command not found`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
go install github.com/cosmtrek/air@latest

# –î–æ–±–∞–≤–∏—Ç—å –≤ PATH (–µ—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω)
# Windows: –¥–æ–±–∞–≤—å—Ç–µ %USERPROFILE%\go\bin –≤ PATH
# Linux/Mac: –¥–æ–±–∞–≤—å—Ç–µ ~/go/bin –≤ PATH
```

### Templ –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `templ: command not found`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Templ
go install github.com/a-h/templ/cmd/templ@latest

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
templ version
```

### –°–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Air –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
```toml
# –í–∫–ª—é—á–∏—Ç—å polling –≤ .air.toml
[build]
  poll = true
  poll_interval = 1000  # –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
```

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** `bind: address already in use`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# Windows: –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
netstat -ano | findstr :3000
taskkill /PID <PID> /F

# Linux/Mac: –Ω–∞–π—Ç–∏ –∏ —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
lsof -ti:3000 | xargs kill -9
```

### –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** Air –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```toml
# –£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –≤ .air.toml
[build]
  delay = 2000  # 2 —Å–µ–∫—É–Ω–¥—ã –≤–º–µ—Å—Ç–æ 1
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç–æ–¥ | –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ | Auto-reload |
|-------|--------------|-------------|
| `go run` | ~3-5 —Å–µ–∫ | ‚ùå –ù–µ—Ç |
| `go build` + –∑–∞–ø—É—Å–∫ | ~3-5 —Å–µ–∫ | ‚ùå –ù–µ—Ç |
| **Air** | ~3-5 —Å–µ–∫ | ‚úÖ –î–∞ |
| Air (incremental) | ~1-2 —Å–µ–∫ | ‚úÖ –î–∞ |

## üéØ Best Practices

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Air –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
   - –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è Templ
   - –ú–µ–Ω—å—à–µ —Ä—É—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Air –¥–ª—è production**
   - Air –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - –î–ª—è production: `go build` ‚Üí –∑–∞–ø—É—Å–∫ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ exclude_dir**
   - –ò—Å–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   - –£—Å–∫–æ—Ä–∏—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ stop_on_error = true**
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–±–æ—Ä–∫–∏
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—É—Å–∫ —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏**
   - `tmp/build-errors.log` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏
   - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Air GitHub](https://github.com/cosmtrek/air)
- [Templ Documentation](https://templ.guide/)
- [Fiber Documentation](https://docs.gofiber.io/)

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] Air —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`air -v`)
- [x] Templ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`templ version`)
- [x] `.air.toml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] `.env.local` —Å–æ–∑–¥–∞–Ω
- [x] PostgreSQL –∑–∞–ø—É—â–µ–Ω
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å `air`
- [x] –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
- [x] –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å auto-reload

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω hot reload –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ

